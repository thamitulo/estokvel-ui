<div class="search-container">
  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Search stokvels</mat-label>
    <input matInput [formControl]="searchControl" placeholder="Type name or description" />
  </mat-form-field>
</div>

<div class="stokvel-grid">
  <mat-card *ngFor="let stokvel of filteredStokvels" class="stokvel-card">
    <mat-card-header>
      <mat-card-title>{{ stokvel.name }}</mat-card-title>
      <mat-card-subtitle>{{ stokvel.type }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <p>{{ stokvel.description }}</p>

      <div class="progress-section">
        <mat-progress-bar
          [value]="progress(stokvel)"
          [color]="progressColor(stokvel)">
        </mat-progress-bar>

        <div class="progress-label">
          <ng-container *ngIf="progress(stokvel) < 100; else complete">
            <strong>{{ progress(stokvel) }}%</strong> |
            R{{ remainingAmount(stokvel) | number }} left
          </ng-container>
          <ng-template #complete>
            <span class="badge">Goal Reached! ðŸŽ‰</span>
          </ng-template>
        </div>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <button mat-flat-button color="primary" (click)="joinStokvel(stokvel)">
        Request to Join
      </button>
    </mat-card-actions>
  </mat-card>
</div>

<mat-paginator
  [length]="filteredStokvels.length"
  [pageSize]="pageSize"
  [pageSizeOptions]="[3]"
  (page)="pageChange($event)">
</mat-paginator>
